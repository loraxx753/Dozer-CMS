// Generated by CoffeeScript 1.6.2
(function() {
  $(".sortable").sortable({
    connectWith: ".connected",
    items: ':not(.disabled)',
    forcePlaceholderSize: true
  });

  $('.sortable').sortable().bind('sortupdate', function(e, ui) {
    var cat, catId, index, projId;

    cat = $(ui.item).closest(".connected");
    catId = cat.data("id");
    cat.find(".empty-category").remove();
    projId = $(ui.item).data("id");
    index = $(ui.item).index();
    return $.post("admin/update/projects", {
      category: catId,
      newIndex: index,
      id: projId
    }, function(data) {});
  });

  $(".sortable").on("dragstart", function() {
    var par;

    par = $(this).closest(".connected");
    if (par.children().length === 1) {
      return par.append('<div class="row empty-category"><div class="span12"><p>There are no projects in this category</p></div></div>');
    }
  });

  $(".sortable").on("dragover", function() {
    return $(this).addClass("test");
  });

}).call(this);
